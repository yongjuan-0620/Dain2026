<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>达因可乐定 2026 数字化战略中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700;900&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background: #fdf2f8; overflow: hidden; }
        
        /* 权限拦截层 */
        #login-overlay {
            position: fixed; inset: 0; z-index: 10000;
            background: linear-gradient(135deg, #be185d 0%, #831843 100%);
            display: flex; align-items: center; justify-content: center;
            transition: all 0.5s ease;
        }
        .login-card {
            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 3rem; border-radius: 2.5rem; width: 90%; max-width: 450px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        /* 侧边栏与布局 */
        .sidebar-active { background: #be185d !important; color: white !important; border-radius: 12px; transform: scale(1.05); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideIn 0.5s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        
        /* 策略卡片 */
        .strategy-card { border-left: 4px solid #be185d; background: white; padding: 1rem; border-radius: 0.75rem; transition: all 0.3s; }
        .strategy-card:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
    </style>
</head>
<body class="flex h-screen text-slate-800">

    <!-- 1. 权限拦截层 (密钥: Dain2026) -->
    <div id="login-overlay">
        <div class="login-card text-center text-white">
            <div class="mb-6 flex justify-center">
                <div class="bg-white p-5 rounded-[2rem] shadow-xl text-pink-600">
                    <i data-lucide="shield-check" class="w-14 h-14"></i>
                </div>
            </div>
            <h1 class="text-3xl font-black mb-1 tracking-tighter">数字化战略中心</h1>
            <p class="text-pink-200 text-xs mb-8 uppercase tracking-[0.3em] font-light">Internal Strategic System</p>
            <input type="password" id="access-pw" class="w-full bg-white/10 border border-white/20 rounded-2xl py-4 px-6 text-white mb-4 text-center text-xl outline-none focus:ring-2 focus:ring-pink-300" placeholder="••••••••">
            <button onclick="verify()" class="w-full bg-white text-pink-700 font-black py-4 rounded-2xl hover:bg-pink-50 transition active:scale-95 shadow-lg">启动系统</button>
            <p id="err" class="text-xs text-pink-300 mt-4 opacity-0 font-bold">密钥验证失败</p>
        </div>
    </div>

    <!-- 2. 主应用程序 -->
    <div id="main-app" class="hidden flex w-full">
        <!-- 侧边导航栏 -->
        <nav class="w-80 bg-white border-r flex flex-col p-8 space-y-2 shadow-2xl z-50">
            <div class="mb-12 flex items-center gap-3">
                <div class="w-10 h-10 bg-gradient-to-br from-pink-500 to-pink-700 rounded-xl flex items-center justify-center text-white italic font-black text-xl shadow-lg">D</div>
                <div>
                    <span class="text-slate-800 font-black text-xl tracking-tighter block">DAIN 2026</span>
                    <span class="text-[9px] text-slate-400 font-bold uppercase tracking-widest">Digital Strategy Center</span>
                </div>
            </div>
            
            <div class="space-y-2">
                <button onclick="nav('summary')" id="btn-summary" class="w-full text-left px-5 py-4 flex items-center gap-4 text-slate-500 hover:bg-pink-50 sidebar-active transition">
                    <i data-lucide="map"></i> 1. 业务计划概要
                </button>
                <button onclick="nav('strategy')" id="btn-strategy" class="w-full text-left px-5 py-4 flex items-center gap-4 text-slate-500 hover:bg-pink-50 transition">
                    <i data-lucide="target"></i> 2. 推广策略全景
                </button>
                <button onclick="nav('patient')" id="btn-patient" class="w-full text-left px-5 py-4 flex items-center gap-4 text-slate-500 hover:bg-pink-50 transition font-bold text-pink-600">
                    <i data-lucide="line-chart"></i> 3. 2035 销量演进
                </button>
            </div>

            <div class="mt-auto p-6 bg-gradient-to-br from-slate-900 to-slate-800 rounded-[2rem] text-white shadow-xl">
                <p class="text-[10px] text-pink-400 font-bold uppercase mb-2 tracking-widest">2026 营收目标</p>
                <div id="side-rev" class="text-3xl font-black italic text-white mb-1">¥ 0</div>
                <div class="w-full bg-white/10 h-1 rounded-full overflow-hidden">
                    <div class="bg-pink-500 h-full w-2/3"></div>
                </div>
            </div>
        </nav>

        <!-- 内容主视窗 -->
        <main class="flex-1 overflow-y-auto p-12 bg-slate-50/50">
            
            <!-- 板块 1: 业务计划概要 (整合版) -->
            <section id="page-summary" class="tab-content active space-y-8">
                <div class="flex justify-between items-end">
                    <div>
                        <h2 class="text-4xl font-black text-slate-900 tracking-tighter">2026 战略部署</h2>
                        <p class="text-pink-600 font-bold mt-1 uppercase text-sm tracking-widest italic">Strategic Deployment Overview</p>
                    </div>
                    <div class="flex gap-3">
                        <button onclick="toggleEdit()" id="editBtn" class="bg-white border-2 border-slate-200 text-slate-600 px-6 py-2 rounded-xl text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition"><i data-lucide="eye"></i> 预览模式</button>
                        <button onclick="save()" class="bg-pink-600 text-white px-6 py-2 rounded-xl text-xs font-bold flex items-center gap-2 shadow-lg hover:bg-pink-700 transition active:scale-95"><i data-lucide="save"></i> 保存全局计划</button>
                    </div>
                </div>

                <div class="grid grid-cols-12 gap-6 edit-container">
                    <div class="col-span-8 space-y-4">
                        <div class="bg-white p-6 rounded-[2rem] shadow-sm border border-slate-100">
                            <h3 class="text-xs font-black text-pink-600 uppercase mb-4 tracking-widest">品牌愿景与核心定位</h3>
                            <textarea id="v-vision" class="w-full text-xl font-bold p-2 outline-none border-b-2 border-slate-50 focus:border-pink-200 transition resize-none" rows="1" placeholder="品牌愿景: 成为ADHD非兴奋剂治疗的领导者"></textarea>
                            <textarea id="v-pos" class="w-full text-sm text-slate-500 mt-2 p-2 outline-none border-b-2 border-slate-50 focus:border-pink-200 transition resize-none" rows="2" placeholder="产品定位: 针对伴随TD或无法耐受兴奋剂副作用的二线首选。"></textarea>
                        </div>
                        <div class="grid grid-cols-3 gap-4">
                            <div class="bg-pink-600 p-6 rounded-[2rem] text-white">
                                <p class="text-[10px] font-bold opacity-80 uppercase">2026 目标额</p>
                                <div class="flex items-baseline gap-1 mt-2">
                                    <input type="number" id="v-target" oninput="upSide()" class="bg-transparent text-3xl font-black outline-none w-full" value="5000">
                                    <span class="font-bold">万</span>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-[2rem] shadow-sm border col-span-2 flex items-center justify-around">
                                <div class="text-center"><p class="text-[10px] font-bold text-slate-400 uppercase">准入目标</p><p class="text-xl font-black text-slate-800">200+ 医院</p></div>
                                <div class="text-center"><p class="text-[10px] font-bold text-slate-400 uppercase">覆盖医生</p><p class="text-xl font-black text-slate-800">1,500+ 名</p></div>
                                <div class="text-center"><p class="text-[10px] font-bold text-slate-400 uppercase">患者获益</p><p class="text-xl font-black text-slate-800">50,000+ 人</p></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-span-4 bg-white p-8 rounded-[2rem] shadow-sm border-2 border-pink-100">
                        <h3 class="text-xs font-black text-pink-600 uppercase mb-4 tracking-widest">核心 SWOT 矩阵</h3>
                        <div class="grid grid-cols-2 gap-3 text-[10px]">
                            <div class="bg-emerald-50 p-3 rounded-xl border border-emerald-100 font-bold text-emerald-700">S: 儿科品牌背书、缓释剂型依从性强</div>
                            <div class="bg-blue-50 p-3 rounded-xl border border-blue-100 font-bold text-blue-700">W: 二线地位、学术心智尚在建设期</div>
                            <div class="bg-amber-50 p-3 rounded-xl border border-amber-100 font-bold text-amber-700">O: 兴奋剂管控严格、合并TD比例高</div>
                            <div class="bg-red-50 p-3 rounded-xl border border-red-100 font-bold text-red-700">T: 托莫西汀集采、低价仿制药冲击</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 板块 2: 推广策略 (整合自 "可乐定推广策略.html") -->
            <section id="page-strategy" class="tab-content space-y-8">
                <h2 class="text-3xl font-black text-slate-900 italic">全方位推广策略看板</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- 学术驱动 -->
                    <div class="space-y-4">
                        <div class="bg-pink-600 text-white p-4 rounded-2xl flex items-center gap-3 shadow-lg">
                            <i data-lucide="graduation-cap"></i> <span class="font-black uppercase tracking-widest text-sm">学术引领</span>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-pink-600 mb-1">ADHD-TD 专家共识</p>
                            <p class="text-[11px] text-slate-500">推动建立联合治疗路径，强化可乐定在合并抽动患者中的首选地位。</p>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-pink-600 mb-1">RWE 真实世界研究</p>
                            <p class="text-[11px] text-slate-500">启动千例级中国患儿安全评价项目，积累本土有效性数据。</p>
                        </div>
                    </div>
                    <!-- 准入与覆盖 -->
                    <div class="space-y-4">
                        <div class="bg-slate-800 text-white p-4 rounded-2xl flex items-center gap-3 shadow-lg">
                            <i data-lucide="building"></i> <span class="font-black uppercase tracking-widest text-sm">准入加速</span>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-slate-700 mb-1">双通道覆盖</p>
                            <p class="text-[11px] text-slate-500">重点省份国谈续约后，快速导入DTP药房及特药报销名单。</p>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-slate-700 mb-1">核心标杆医院</p>
                            <p class="text-[11px] text-slate-500">2026年前完成150家核心三甲医院的进院流程。</p>
                        </div>
                    </div>
                    <!-- 患者教育 -->
                    <div class="space-y-4">
                        <div class="bg-pink-100 text-pink-700 p-4 rounded-2xl flex items-center gap-3 border border-pink-200 shadow-sm">
                            <i data-lucide="users"></i> <span class="font-black uppercase tracking-widest text-sm">患教闭环</span>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-pink-800 mb-1">依从性管理计划</p>
                            <p class="text-[11px] text-slate-500">数字化随访小程序，提醒每日睡前服药，降低漏服率。</p>
                        </div>
                        <div class="strategy-card">
                            <p class="text-xs font-black text-pink-800 mb-1">校园科普行</p>
                            <p class="text-[11px] text-slate-500">联手儿科协会进入校园，帮助老师和家长正确识别ADHD症状。</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 板块 3: 销量推演 (整合自 "患者流2.html") -->
            <section id="page-patient" class="tab-content space-y-8">
                <div class="flex justify-between items-center">
                    <h2 class="text-3xl font-black text-slate-900 tracking-tighter italic">2023-2035 销量演进动态模型</h2>
                    <div class="bg-white px-4 py-2 rounded-xl shadow-sm border text-[10px] font-bold text-slate-400">基于：城镇化率 × 诊断率 × 二线渗透率</div>
                </div>

                <div class="bg-indigo-950 p-8 rounded-[3rem] text-white shadow-2xl grid md:grid-cols-4 gap-8">
                    <div class="space-y-3">
                        <label class="text-[10px] font-bold text-indigo-300 uppercase tracking-widest flex justify-between">城镇化率 <span id="l-urb" class="text-pink-400">66%</span></label>
                        <input type="range" id="p-urb" min="60" max="85" value="66" oninput="calc()" class="w-full accent-pink-500">
                    </div>
                    <div class="space-y-3">
                        <label class="text-[10px] font-bold text-indigo-300 uppercase tracking-widest flex justify-between">诊断率提高 <span id="l-diag" class="text-pink-400">20%</span></label>
                        <input type="range" id="p-diag" min="10" max="50" value="20" oninput="calc()" class="w-full accent-pink-500">
                    </div>
                    <div class="space-y-3">
                        <label class="text-[10px] font-bold text-indigo-300 uppercase tracking-widest flex justify-between">二线渗透率 <span id="l-share" class="text-pink-400">12%</span></label>
                        <input type="range" id="p-share" min="5" max="40" value="12" oninput="calc()" class="w-full accent-pink-500">
                    </div>
                    <div class="bg-white/10 p-6 rounded-[2rem] text-center flex flex-col justify-center border border-white/10">
                        <p class="text-[10px] font-bold text-pink-300 uppercase mb-1">2026 预估营收</p>
                        <p id="out-rev-2026" class="text-3xl font-black italic">¥ 0</p>
                    </div>
                </div>
                
                <div class="bg-white p-10 rounded-[3rem] shadow-sm border border-slate-100 h-[500px]">
                    <canvas id="mainChart"></canvas>
                </div>
            </section>
        </main>
    </div>

    <script>
        lucide.createIcons();
        let chart;

        // 权限验证
        function verify() {
            const pw = document.getElementById('access-pw').value;
            if(pw === "Dain2026") {
                document.getElementById('login-overlay').classList.add('opacity-0', 'pointer-events-none');
                setTimeout(() => {
                    document.getElementById('main-app').classList.remove('hidden');
                    load();
                    calc();
                }, 500);
            } else {
                const err = document.getElementById('err');
                err.classList.remove('opacity-0');
                setTimeout(() => err.classList.add('opacity-0'), 2000);
            }
        }

        // 导航控制
        function nav(id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('sidebar-active'));
            document.getElementById('page-' + id).classList.add('active');
            document.getElementById('btn-' + id).classList.add('sidebar-active');
        }

        // 保存加载
        function save() {
            const f = ['vision','pos','target'];
            f.forEach(k => localStorage.setItem('site_v2_'+k, document.getElementById('v-'+k).value));
            alert("战略数据已安全同步至云端（本地存储）。");
        }
        function load() {
            const f = ['vision','pos','target'];
            f.forEach(k => {
                const v = localStorage.getItem('site_v2_'+k);
                if(v) document.getElementById('v-'+k).value = v;
            });
            upSide();
        }
        function upSide() {
            const val = document.getElementById('v-target').value;
            document.getElementById('side-rev').innerText = "¥ " + Number(val).toLocaleString();
        }

        // 预览切换
        let isPre = false;
        function toggleEdit() {
            isPre = !isPre;
            const el = document.querySelectorAll('.edit-container textarea, .edit-container input');
            el.forEach(i => {
                if(isPre) { i.classList.add('border-transparent','bg-transparent'); i.readOnly = true; }
                else { i.classList.remove('border-transparent','bg-transparent'); i.readOnly = false; }
            });
            document.getElementById('editBtn').innerHTML = isPre ? '<i data-lucide="edit"></i> 编辑模式' : '<i data-lucide="eye"></i> 预览模式';
            lucide.createIcons();
        }

        // 销量演进模型计算 (整合自患者流文件逻辑)
        function calc() {
            const urb = document.getElementById('p-urb').value / 100;
            const dia = document.getElementById('p-diag').value / 100;
            const shr = document.getElementById('p-share').value / 100;
            
            document.getElementById('l-urb').innerText = (urb*100).toFixed(0) + "%";
            document.getElementById('l-diag').innerText = (dia*100).toFixed(0) + "%";
            document.getElementById('l-share').innerText = (shr*100).toFixed(0) + "%";

            const yrs = [2023, 2024, 2025, 2026, 2027, 2028, 2029, 2030, 2031, 2032, 2033, 2034, 2035];
            const data = yrs.map(y => {
                // 患者流转逻辑：人口基数 -> 城镇化 -> 发病率(6.2%) -> 诊断率 -> 二线用药比例(15%) -> 可乐定份额
                const basePop = 17500 - (y-2023)*350; 
                const treatedPop = basePop * urb * 0.062 * dia * 0.15;
                let marketShare = 0.005; 
                if(y >= 2026) marketShare = 0.01 + (shr - 0.01) * Math.min(1, (y-2026)/5);
                const revenue = (treatedPop * marketShare * 10 * 150).toFixed(0);
                if(y === 2026) document.getElementById('out-rev-2026').innerText = "¥ " + revenue + " 万";
                return revenue;
            });
            updateChart(yrs, data);
        }

        function updateChart(labs, data) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labs,
                    datasets: [{
                        label: '预估年度营收 (万)',
                        data: data,
                        borderColor: '#be185d',
                        borderWidth: 6,
                        backgroundColor: 'rgba(190, 24, 93, 0.05)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 4,
                        pointBackgroundColor: '#fff',
                        pointBorderColor: '#be185d',
                        pointBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: { backgroundColor: '#1e293b', padding: 12, titleFont: {size: 14}, bodyFont: {size: 14} }
                    },
                    scales: {
                        y: { beginAtZero: true, grid: { color: '#f1f5f9' }, ticks: { font: { weight: 'bold' } } },
                        x: { grid: { display: false }, ticks: { font: { weight: 'bold' } } }
                    }
                }
            });
        }
    </script>
</body>
</html>
